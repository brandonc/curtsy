<!DOCTYPE html />
<html>
<head>
	<title>StringRegexExtensions.cs</title>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
	<link href="../explain.css" rel="stylesheet" media="all" type="text/css" />
	<script src="../prettify.js" type="text/javascript"></script>
</head>
<body onload="prettyPrint()">
	<div id="container">
		<div id="background"></div>
			<div id="sources" class="dd">
				StringRegexExtensions.cs
                <div class="ddbtn"></div>
                <header></header>
                <nav>
                    <table border="0" cellspacing="0">
							<tr>
                                <td class="size">8.92 KB</td>
                                <td><a class="source" href="../explain.html">
								    Explain.cs
							    </a></td>
                            </tr>
							<tr>
                                <td class="size">37.19 KB</td>
                                <td><a class="source" href="../extensions/stringregexextensions.html">
								    Extensions\StringRegexExtensions.cs
							    </a></td>
                            </tr>
							<tr>
                                <td class="size">1.76 KB</td>
                                <td><a class="source" href="../foundtypes.html">
								    FoundTypes.cs
							    </a></td>
                            </tr>
							<tr>
                                <td class="size">12.6 KB</td>
                                <td><a class="source" href="../parser,lexer.html">
								    Parser,Lexer.cs
							    </a></td>
                            </tr>
							<tr>
                                <td class="size">1.02 KB</td>
                                <td><a class="source" href="../pathhelper.html">
								    PathHelper.cs
							    </a></td>
                            </tr>
							<tr>
                                <td class="size">3.27 KB</td>
                                <td><a class="source" href="../program.html">
								    Program.cs
							    </a></td>
                            </tr>
							<tr>
                                <td class="size">1.46 KB</td>
                                <td><a class="source" href="../properties/assemblyinfo.html">
								    Properties\AssemblyInfo.cs
							    </a></td>
                            </tr>
							<tr>
                                <td class="size">4.17 KB</td>
                                <td><a class="source" href="../embeddedresources.html">
								    EmbeddedResources.cs
							    </a></td>
                            </tr>
							<tr>
                                <td class="size">645 B</td>
                                <td><a class="source" href="../section.html">
								    Section.cs
							    </a></td>
                            </tr>
							<tr>
                                <td class="size">1.19 KB</td>
                                <td><a class="source" href="../templatebase.html">
								    TemplateBase.cs
							    </a></td>
                            </tr>
                    </table>
				</nav>
			</div>
		<table cellpadding="0" cellspacing="0">
			<thead>
				<tr>
					<th class="docs">
						<h1>StringRegexExtensions.cs</h1>
					</th>
                    <th class="lines"></th>
					<th class="code">&nbsp;</th>
				</tr>
			</thead>
			<tbody>
					<tr id="section_1">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_1">&#182;</a>
							</div>
							<p>Uncomment the next line depending on your environment (Mono, Visual Studio 2008, .NET 3.5)</p>

<h1>define NET35</h1>

<p>Use .NET 4.0 to enable thread safe cacheing.</p>

<p>Copyright &copy;2011 Brandon Croft and contributors</p>

						</td>
                        <td class="lines">
9<br />
10<br />
11<br />
12<br />
13<br />
14<br />
15<br />
16<br />
17<br />
18<br />
19<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>using System.Linq;
using System.Collections.Generic;
using System.Collections;
using System.Text.RegularExpressions;
#if !NET35
using System.Collections.Concurrent;
#endif

namespace System
{
</code></pre>
						</td>
					</tr>
					<tr id="section_2">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_2">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
34<br />
35<br />
36<br />
37<br />
38<br />
39<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>    public class MatchData : IEnumerable&lt;string&gt;
    {
        List&lt;Capture&gt; indexcaptures = new List&lt;Capture&gt;();
        Dictionary&lt;string, Capture&gt; namedcaptures = null;

</code></pre>
						</td>
					</tr>
					<tr id="section_3">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_3">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
44<br />
45<br />
46<br />
47<br />
48<br />
49<br />
50<br />
51<br />
52<br />
53<br />
54<br />
55<br />
56<br />
57<br />
58<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public string this[int index]
        {
            get
            {
                try
                {
                    return indexcaptures[index].Value;
                } catch (ArgumentOutOfRangeException ex)
                {
                    throw new IndexOutOfRangeException(String.Format(&quot;The index {0} was out of range&quot;, index), ex);
                }
            }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_4">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_4">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
63<br />
64<br />
65<br />
66<br />
67<br />
68<br />
69<br />
70<br />
71<br />
72<br />
73<br />
74<br />
75<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public string this[string name]
        {
            get
            {
                Capture result = null;
                if (namedcaptures == null || !namedcaptures.TryGetValue(name, out result))
                    return null;

                return result.Value;
            }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_5">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_5">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
80<br />
81<br />
82<br />
83<br />
84<br />
85<br />
86<br />
87<br />
88<br />
89<br />
90<br />
91<br />
92<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public int Begin(int index)
        {
            try
            {
                Capture cap = indexcaptures[index];
                return cap.Index;
            } catch (ArgumentOutOfRangeException ex)
            {
                throw new IndexOutOfRangeException(String.Format(&quot;The index {0} was out of range&quot;, index), ex);
            }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_6">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_6">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
97<br />
98<br />
99<br />
100<br />
101<br />
102<br />
103<br />
104<br />
105<br />
106<br />
107<br />
108<br />
109<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public int End(int index)
        {
            try
            {
                Capture cap = indexcaptures[index];
                return cap.Index + cap.Length;
            } catch (ArgumentOutOfRangeException ex)
            {
                throw new IndexOutOfRangeException(String.Format(&quot;The index {0} was out of range&quot;, index), ex);
            }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_7">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_7">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
114<br />
115<br />
116<br />
117<br />
118<br />
119<br />
120<br />
121<br />
122<br />
123<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public int Begin(string name)
        {
            Capture cap;
            if(namedcaptures == null || !namedcaptures.TryGetValue(name, out cap))
                return -1;
            
            return cap.Index;
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_8">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_8">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
128<br />
129<br />
130<br />
131<br />
132<br />
133<br />
134<br />
135<br />
136<br />
137<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public int End(string name)
        {
            Capture cap;
            if (namedcaptures == null || !namedcaptures.TryGetValue(name, out cap))
                return -1;

            return cap.Index + cap.Length;
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_9">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_9">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
140<br />
141<br />
142<br />
143<br />
144<br />
145<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public int Count
        {
            get { return indexcaptures.Count + (namedcaptures == null ? 0 : namedcaptures.Count); }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_10">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_10">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
148<br />
149<br />
150<br />
151<br />
152<br />
153<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public int MatchCount
        {
            get { return indexcaptures.Count; }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_11">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_11">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
158<br />
159<br />
160<br />
161<br />
162<br />
163<br />
164<br />
165<br />
166<br />
167<br />
168<br />
169<br />
170<br />
171<br />
172<br />
173<br />
174<br />
175<br />
176<br />
177<br />
178<br />
179<br />
180<br />
181<br />
182<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public string[] GetNames()
        {
            if(namedcaptures == null)
                return new string[0];

            return this.namedcaptures.Keys.ToArray();
        }

        void AddMatch(Regex regex, Match match)
        {
            if (!match.Success)
                return;

            for (int index = 0; index &lt; match.Groups.Count; index++)
            {
                Group group = match.Groups[index];
                if (group.Captures.Count == 0)
                {
                    continue;
                }

                string name = regex.GroupNameFromNumber(index);
                int tryint;

</code></pre>
						</td>
					</tr>
					<tr id="section_12">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_12">&#182;</a>
							</div>
							<p>We only record the LAST capture in this group. This simplifies matching so
that multiple captures in the same group are overwritten.</p>

						</td>
                        <td class="lines">
184<br />
185<br />
186<br />
187<br />
188<br />
189<br />
190<br />
191<br />
192<br />
193<br />
194<br />
195<br />
196<br />
197<br />
198<br />
199<br />
200<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>                if (Int32.TryParse(name, out tryint))
                {
                    this.indexcaptures.Add(group.Captures[group.Captures.Count - 1]);
                }
                else
                {
                    if (namedcaptures == null)
                        namedcaptures = new Dictionary&lt;string, Capture&gt;();

                    this.namedcaptures[name] = group.Captures[group.Captures.Count - 1];
                }
            }
        }

        IEnumerable&lt;Capture&gt; GetCaptures()
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_13">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_13">&#182;</a>
							</div>
							<p>First return numbered capture values&hellip;</p>

						</td>
                        <td class="lines">
201<br />
202<br />
203<br />
204<br />
205<br />
206<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>            foreach (Capture capture in indexcaptures)
            {
                yield return capture;
            }

</code></pre>
						</td>
					</tr>
					<tr id="section_14">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_14">&#182;</a>
							</div>
							<p>&hellip;then return named captures</p>

						</td>
                        <td class="lines">
207<br />
208<br />
209<br />
210<br />
211<br />
212<br />
213<br />
214<br />
215<br />
216<br />
217<br />
218<br />
219<br />
220<br />
221<br />
222<br />
223<br />
224<br />
225<br />
226<br />
227<br />
228<br />
229<br />
230<br />
231<br />
232<br />
233<br />
234<br />
235<br />
236<br />
237<br />
238<br />
239<br />
240<br />
241<br />
242<br />
243<br />
244<br />
245<br />
246<br />
247<br />
248<br />
249<br />
250<br />
251<br />
252<br />
253<br />
254<br />
255<br />
256<br />
257<br />
258<br />
259<br />
260<br />
261<br />
262<br />
263<br />
264<br />
265<br />
266<br />
267<br />
268<br />
269<br />
270<br />
271<br />
272<br />
273<br />
274<br />
275<br />
276<br />
277<br />
278<br />
279<br />
280<br />
281<br />
282<br />
283<br />
284<br />
285<br />
286<br />
287<br />
288<br />
289<br />
290<br />
291<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>            if (namedcaptures != null)
            {
                foreach (KeyValuePair&lt;string, Capture&gt; capture in namedcaptures)
                {
                    yield return capture.Value;
                }
            }
        }

        IEnumerator&lt;string&gt; GetEnumeratorInternal()
        {
            foreach (Capture cap in GetCaptures())
            {
                yield return cap.Value;
            }
        }

        public IEnumerator&lt;string&gt; GetEnumerator()
        {
            return GetEnumeratorInternal();
        }

        IEnumerator IEnumerable.GetEnumerator()
        {
            return GetEnumeratorInternal();
        }

        public MatchData(Regex regex, MatchCollection matches)
        {
            if (matches == null || matches.Count == 0)
                return;

            foreach (Match match in matches)
            {
                AddMatch(regex, match);
            }
        }

        public MatchData(Regex regex, Match match)
        {
            AddMatch(regex, match);
        }
    }

    public static class StringRegexExtensions
    {
        static readonly Dictionary&lt;char, RegexOptions&gt; _optionChars = new Dictionary&lt;char, RegexOptions&gt; {
            { &#39;i&#39;, RegexOptions.IgnoreCase },
            { &#39;s&#39;, RegexOptions.Singleline },
            { &#39;m&#39;, RegexOptions.Multiline },
            { &#39;x&#39;, RegexOptions.IgnorePatternWhitespace },
            { &#39;c&#39;, RegexOptions.Compiled },
            { &#39;r&#39;, RegexOptions.RightToLeft }
        };

#if !NET35
        static readonly ConcurrentDictionary&lt;Tuple&lt;string, RegexOptions&gt;, Regex&gt; _cache = new ConcurrentDictionary&lt;Tuple&lt;string, RegexOptions&gt;, Regex&gt;();

        static Tuple&lt;string, RegexOptions&gt; MakeCacheKey(string pattern, RegexOptions opt)
        {
            return new Tuple&lt;string, RegexOptions&gt;(pattern, opt);
        }

        static Tuple&lt;string, RegexOptions&gt; MakeCacheKey(string pattern)
        {
            return new Tuple&lt;string, RegexOptions&gt;(pattern, RegexOptions.None);
        }

        static Regex ToRegex(this string pattern)
        {
            return _cache.GetOrAdd(MakeCacheKey(pattern), p =&gt;
            {
                return new Regex(pattern);
            });
        }

        static Regex ToRegex(this string pattern, RegexOptions options)
        {
            return _cache.GetOrAdd(MakeCacheKey(pattern, options), p =&gt;
            {
                return new Regex(pattern, options);
            });
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_15">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_15">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
294<br />
295<br />
296<br />
297<br />
298<br />
299<br />
300<br />
301<br />
302<br />
303<br />
304<br />
305<br />
306<br />
307<br />
308<br />
309<br />
310<br />
311<br />
312<br />
313<br />
314<br />
315<br />
316<br />
317<br />
318<br />
319<br />
320<br />
321<br />
322<br />
323<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static int CacheCount
        {
            get
            {
                return _cache.Count;
            }
        }
#else
        static Regex ToRegex(this string pattern)
        {
            return new Regex(pattern);
        }

        static Regex ToRegex(this string pattern, RegexOptions options)
        {
            return new Regex(pattern, options);
        }
#endif

        static RegexOptions GetOptions(string options)
        {
            if (String.IsNullOrEmpty(options))
                return RegexOptions.None;

            return (RegexOptions)options.Select(c =&gt; {
                try { return (int)_optionChars[c]; } catch (KeyNotFoundException) { return 0; }
            }).Sum();
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_16">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_16">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
328<br />
329<br />
330<br />
331<br />
332<br />
333<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static bool HasPattern(this string input, string pattern)
        {
            return HasPattern(input, pattern, null);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_17">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_17">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
338<br />
339<br />
340<br />
341<br />
342<br />
343<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static bool HasPattern(this string input, string pattern, string options)
        {
            return pattern.ToRegex(GetOptions(options)).IsMatch(input);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_18">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_18">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
347<br />
348<br />
349<br />
350<br />
351<br />
352<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static bool HasPattern(this string input, string pattern, int startat)
        {
            return HasPattern(input, pattern, null, startat);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_19">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_19">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
357<br />
358<br />
359<br />
360<br />
361<br />
362<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static bool HasPattern(this string input, string pattern, string options, int startat)
        {
            return pattern.ToRegex(GetOptions(options)).IsMatch(input, startat);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_20">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_20">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
367<br />
368<br />
369<br />
370<br />
371<br />
372<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static MatchData MatchesPattern(this string input, string pattern)
        {
            return MatchesPattern(input, pattern, null);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_21">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_21">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
378<br />
379<br />
380<br />
381<br />
382<br />
383<br />
384<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static MatchData MatchesPattern(this string input, string pattern, string options)
        {
            var re = pattern.ToRegex(GetOptions(options));
            return new MatchData(re, re.Matches(input));
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_22">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_22">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
390<br />
391<br />
392<br />
393<br />
394<br />
395<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static MatchData MatchesPattern(this string input, string pattern, int startat)
        {
            return MatchesPattern(input, pattern, null, startat);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_23">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_23">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
402<br />
403<br />
404<br />
405<br />
406<br />
407<br />
408<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static MatchData MatchesPattern(this string input, string pattern, string options, int startat)
        {
            var re = pattern.ToRegex(GetOptions(options));
            return new MatchData(re, re.Matches(input, startat));
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_24">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_24">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
414<br />
415<br />
416<br />
417<br />
418<br />
419<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static string Sub(this string input, string pattern, string replacement)
        {
            return Sub(input, pattern, null, replacement);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_25">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_25">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
426<br />
427<br />
428<br />
429<br />
430<br />
431<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static string Sub(this string input, string pattern, string options, string replacement)
        {
            return pattern.ToRegex(GetOptions(options)).Replace(input, replacement, 1);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_26">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_26">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
437<br />
438<br />
439<br />
440<br />
441<br />
442<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static string Sub(this string input, string pattern, Func&lt;Match, string&gt; evaluator)
        {
            return Sub(input, pattern, null, evaluator);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_27">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_27">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
449<br />
450<br />
451<br />
452<br />
453<br />
454<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static string Sub(this string input, string pattern, string options, Func&lt;Match, string&gt; evaluator)
        {
            return pattern.ToRegex(GetOptions(options)).Replace(input, delegate(Match arg) { return evaluator(arg); }, 1);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_28">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_28">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
460<br />
461<br />
462<br />
463<br />
464<br />
465<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static string GSub(this string input, string pattern, string replacement)
        {
            return GSub(input, pattern, null, replacement);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_29">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_29">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
472<br />
473<br />
474<br />
475<br />
476<br />
477<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static string GSub(this string input, string pattern, string options, string replacement)
        {
            return pattern.ToRegex(GetOptions(options)).Replace(input, replacement);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_30">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_30">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
483<br />
484<br />
485<br />
486<br />
487<br />
488<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static string GSub(this string input, string pattern, Func&lt;Match, string&gt; evaluator)
        {
            return GSub(input, pattern, null, evaluator);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_31">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_31">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
495<br />
496<br />
497<br />
498<br />
499<br />
500<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static string GSub(this string input, string pattern, string options, Func&lt;Match, string&gt; evaluator)
        {
            return pattern.ToRegex(GetOptions(options)).Replace(input, delegate(Match arg) { return evaluator(arg); });
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_32">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_32">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
505<br />
506<br />
507<br />
508<br />
509<br />
510<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static int IndexOfPattern(this string input, string pattern)
        {
            return IndexOfPattern(input, pattern, null);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_33">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_33">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
516<br />
517<br />
518<br />
519<br />
520<br />
521<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static int IndexOfPattern(this string input, string pattern, string options)
        {
            return input.MatchPattern(pattern, options).Begin(0);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_34">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_34">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
527<br />
528<br />
529<br />
530<br />
531<br />
532<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static int IndexOfPattern(this string input, string pattern, int startat)
        {
            return IndexOfPattern(input, pattern, null, startat);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_35">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_35">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
539<br />
540<br />
541<br />
542<br />
543<br />
544<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static int IndexOfPattern(this string input, string pattern, string options, int startat)
        {
            return input.MatchPattern(pattern, options, startat).Begin(0);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_36">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_36">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
549<br />
550<br />
551<br />
552<br />
553<br />
554<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static int LastIndexOfPattern(this string input, string pattern)
        {
            return LastIndexOfPattern(input, pattern, null);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_37">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_37">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
560<br />
561<br />
562<br />
563<br />
564<br />
565<br />
566<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static int LastIndexOfPattern(this string input, string pattern, string options)
        {
            var m = input.MatchesPattern(pattern, options);
            return m.Begin(m.MatchCount - 1);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_38">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_38">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
571<br />
572<br />
573<br />
574<br />
575<br />
576<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static string FindPattern(this string input, string pattern)
        {
            return input.MatchPattern(pattern).First();
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_39">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_39">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
582<br />
583<br />
584<br />
585<br />
586<br />
587<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static string FindPattern(this string input, string pattern, string options)
        {
            return input.MatchPattern(pattern, options).First();
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_40">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_40">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
593<br />
594<br />
595<br />
596<br />
597<br />
598<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static string FindPattern(this string input, string pattern, int capture)
        {
            return FindPattern(input, pattern, null, capture);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_41">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_41">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
605<br />
606<br />
607<br />
608<br />
609<br />
610<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static string FindPattern(this string input, string pattern, string options, int capture)
        {
            try { return input.MatchPattern(pattern, options)[capture]; } catch (IndexOutOfRangeException) { return null; }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_42">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_42">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
615<br />
616<br />
617<br />
618<br />
619<br />
620<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static string[] Partition(this string input, string pattern)
        {
            return Partition(input, pattern, null);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_43">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_43">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
626<br />
627<br />
628<br />
629<br />
630<br />
631<br />
632<br />
633<br />
634<br />
635<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static string[] Partition(this string input, string pattern, string options)
        {
            var m = input.MatchPattern(pattern, options);
            if (m.Count == 0)
                return new string[] { String.Empty, String.Empty, input };

            return new string[] { input.Substring(0, m.Begin(0)), m.First(), input.Substring(m.End(0)) };
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_44">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_44">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
641<br />
642<br />
643<br />
644<br />
645<br />
646<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static void Scan(this string input, string pattern, Action&lt;string&gt; each)
        {
            input.Scan(pattern, null, each);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_45">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_45">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
651<br />
652<br />
653<br />
654<br />
655<br />
656<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static void Scan(this string input, string pattern, Action&lt;string, string&gt; each)
        {
            input.Scan(pattern, null, each);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_46">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_46">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
661<br />
662<br />
663<br />
664<br />
665<br />
666<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static void Scan(this string input, string pattern, Action&lt;string, string, string&gt; each)
        {
            input.Scan(pattern, null, each);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_47">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_47">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
671<br />
672<br />
673<br />
674<br />
675<br />
676<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static void Scan(this string input, string pattern, Action&lt;string, string, string, string&gt; each)
        {
            input.Scan(pattern, null, each);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_48">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_48">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
683<br />
684<br />
685<br />
686<br />
687<br />
688<br />
689<br />
690<br />
691<br />
692<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static void Scan(this string input, string pattern, string options, Action&lt;string&gt; each)
        {
            var matches = pattern.ToRegex(GetOptions(options)).Matches(input);
            foreach (Match match in matches)
            {
                each(match.Groups.Count &gt; 1 ? match.Groups[1].Value : match.Value);
            }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_49">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_49">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
698<br />
699<br />
700<br />
701<br />
702<br />
703<br />
704<br />
705<br />
706<br />
707<br />
708<br />
709<br />
710<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static void Scan(this string input, string pattern, string options, Action&lt;string, string&gt; each)
        {
            var matches = pattern.ToRegex(GetOptions(options)).Matches(input);
            foreach (Match match in matches)
            {
                if (match.Groups.Count &gt; 2)
                    each(match.Groups[1].Value, match.Groups[2].Value);
                else
                    each(match.Value, null);
            }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_50">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_50">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
716<br />
717<br />
718<br />
719<br />
720<br />
721<br />
722<br />
723<br />
724<br />
725<br />
726<br />
727<br />
728<br />
729<br />
730<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static void Scan(this string input, string pattern, string options, Action&lt;string, string, string&gt; each)
        {
            var matches = pattern.ToRegex(GetOptions(options)).Matches(input);
            foreach (Match match in matches)
            {
                if (match.Groups.Count &gt; 3)
                    each(match.Groups[1].Value, match.Groups[2].Value, match.Groups[3].Value);
                else if (match.Groups.Count &gt; 2)
                    each(match.Groups[1].Value, match.Groups[2].Value, null);
                else
                    each(match.Value, null, null);
            }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_51">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_51">&#182;</a>
							</div>
							
						</td>
                        <td class="lines">
736<br />
737<br />
738<br />
739<br />
740<br />
741<br />
742<br />
743<br />
744<br />
745<br />
746<br />
747<br />
748<br />
749<br />
750<br />
751<br />
752<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static void Scan(this string input, string pattern, string options, Action&lt;string, string, string, string&gt; each)
        {
            var matches = pattern.ToRegex(GetOptions(options)).Matches(input);
            foreach (Match match in matches)
            {
                if(match.Groups.Count &gt; 4)
                    each(match.Groups[1].Value, match.Groups[2].Value, match.Groups[3].Value, match.Groups[4].Value);
                else if (match.Groups.Count &gt; 3)
                    each(match.Groups[1].Value, match.Groups[2].Value, match.Groups[3].Value, null);
                else if (match.Groups.Count &gt; 2)
                    each(match.Groups[1].Value, match.Groups[2].Value, null, null);
                else
                    each(match.Value, null, null, null);
            }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_52">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_52">&#182;</a>
							</div>
							<p>Single match, used internally</p>

						</td>
                        <td class="lines">
753<br />
754<br />
755<br />
756<br />
757<br />
758<br />
759<br />
760<br />
761<br />
762<br />
763<br />
764<br />
765<br />
766<br />
767<br />
768<br />
769<br />
770<br />
771<br />
772<br />
773<br />
774<br />
775<br />
776<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        static MatchData MatchPattern(this string input, string pattern)
        {
            return MatchPattern(input, pattern, null);
        }

        static MatchData MatchPattern(this string input, string pattern, string options)
        {
            var re = pattern.ToRegex(GetOptions(options));
            return new MatchData(re, re.Match(input));
        }

        static MatchData MatchPattern(this string input, string pattern, int startat)
        {
            return MatchPattern(input, pattern, null, startat);
        }

        static MatchData MatchPattern(this string input, string pattern, string options, int startat)
        {
            var re = pattern.ToRegex(GetOptions(options));
            return new MatchData(re, re.Match(input, startat));
        }
    }
}

</code></pre>
						</td>
					</tr>
			</tbody>
		</table>
	</div>
</body>
</html>