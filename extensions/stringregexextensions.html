<!DOCTYPE html />
<html>
<head>
	<title>StringRegexExtensions.cs</title>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
	<link href="../curtsy.css" rel="stylesheet" media="all" type="text/css" />
	<script src="../prettify.js" type="text/javascript"></script>
</head>
<body onload="prettyPrint()">
	<div id="container">
		<div id="background"></div>
			<div id="sources" class="dd">
				StringRegexExtensions.cs
                <div class="ddbtn"></div>
                <header></header>
                <nav>
                    <table border="0" cellspacing="0">
							<tr>
                                <td class="size">9.77 KB</td>
                                <td><a class="source" href="../curtsy.html">
								    Curtsy.cs
							    </a></td>
                            </tr>
							<tr>
                                <td class="size">37.36 KB</td>
                                <td><a class="source" href="../extensions/stringregexextensions.html">
								    Extensions\StringRegexExtensions.cs
							    </a></td>
                            </tr>
							<tr>
                                <td class="size">1.76 KB</td>
                                <td><a class="source" href="../foundtypes.html">
								    FoundTypes.cs
							    </a></td>
                            </tr>
							<tr>
                                <td class="size">12.6 KB</td>
                                <td><a class="source" href="../parser,lexer.html">
								    Parser,Lexer.cs
							    </a></td>
                            </tr>
							<tr>
                                <td class="size">1.02 KB</td>
                                <td><a class="source" href="../pathhelper.html">
								    PathHelper.cs
							    </a></td>
                            </tr>
							<tr>
                                <td class="size">3.26 KB</td>
                                <td><a class="source" href="../program.html">
								    Program.cs
							    </a></td>
                            </tr>
							<tr>
                                <td class="size">1.46 KB</td>
                                <td><a class="source" href="../properties/assemblyinfo.html">
								    Properties\AssemblyInfo.cs
							    </a></td>
                            </tr>
							<tr>
                                <td class="size">4.16 KB</td>
                                <td><a class="source" href="../embeddedresources.html">
								    EmbeddedResources.cs
							    </a></td>
                            </tr>
							<tr>
                                <td class="size">644 B</td>
                                <td><a class="source" href="../section.html">
								    Section.cs
							    </a></td>
                            </tr>
							<tr>
                                <td class="size">1.19 KB</td>
                                <td><a class="source" href="../templatebase.html">
								    TemplateBase.cs
							    </a></td>
                            </tr>
                    </table>
				</nav>
			</div>
		<table cellpadding="0" cellspacing="0">
			<thead>
				<tr>
					<th class="docs">
						<h1>StringRegexExtensions.cs</h1>
					</th>
                    <th class="lines"></th>
					<th class="code">&nbsp;</th>
				</tr>
			</thead>
			<tbody>
					<tr id="section_1">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_1">&#182;</a>
							</div>
							<p>Uncomment the next line depending on your environment (Mono, Visual Studio 2008, .NET 3.5)</p>

<p>Use .NET 4.0 to enable thread safe cacheing.</p>

<p>Copyright &copy;2011 Brandon Croft and contributors</p>

						</td>
                        <td class="lines">
9<br />
10<br />
11<br />
12<br />
13<br />
14<br />
15<br />
16<br />
17<br />
18<br />
19<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>using System.Linq;
using System.Collections.Generic;
using System.Collections;
using System.Text.RegularExpressions;
#if !NET35
using System.Collections.Concurrent;
#endif

namespace System
{
</code></pre>
						</td>
					</tr>
					<tr id="section_2">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_2">&#182;</a>
							</div>
							<p>A simplified collection of regex groups and captures.</p>

<p>See <a href="http://stackoverflow.com/questions/2250335/differences-among-net-capture-group-match/2251774#2251774">http://stackoverflow.com/questions/2250335/differences-among-net-capture-group-match/2251774#2251774</a> for a good
explanation of why MatchCollection is so complicated.</p>

						</td>
                        <td class="lines">
34<br />
35<br />
36<br />
37<br />
38<br />
39<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>    public class MatchData : IEnumerable&lt;string&gt;
    {
        List&lt;Capture&gt; indexcaptures = new List&lt;Capture&gt;();
        Dictionary&lt;string, Capture&gt; namedcaptures = null;

</code></pre>
						</td>
					</tr>
					<tr id="section_3">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_3">&#182;</a>
							</div>
							<p>Gets a numbered capture value. The first index (0) is always the entire match.</p>

						</td>
                        <td class="lines">
44<br />
45<br />
46<br />
47<br />
48<br />
49<br />
50<br />
51<br />
52<br />
53<br />
54<br />
55<br />
56<br />
57<br />
58<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public string this[int index]
        {
            get
            {
                try
                {
                    return indexcaptures[index].Value;
                } catch (ArgumentOutOfRangeException ex)
                {
                    throw new IndexOutOfRangeException(String.Format(&quot;The index {0} was out of range&quot;, index), ex);
                }
            }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_4">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_4">&#182;</a>
							</div>
							<p>Gets a named capture value.</p>

						</td>
                        <td class="lines">
63<br />
64<br />
65<br />
66<br />
67<br />
68<br />
69<br />
70<br />
71<br />
72<br />
73<br />
74<br />
75<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public string this[string name]
        {
            get
            {
                Capture result = null;
                if (namedcaptures == null || !namedcaptures.TryGetValue(name, out result))
                    return null;

                return result.Value;
            }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_5">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_5">&#182;</a>
							</div>
							<p>Gets the position of the specifed numbered capture</p>

						</td>
                        <td class="lines">
80<br />
81<br />
82<br />
83<br />
84<br />
85<br />
86<br />
87<br />
88<br />
89<br />
90<br />
91<br />
92<br />
93<br />
94<br />
95<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public int Begin(int index)
        {
            if (index &gt;= indexcaptures.Count)
                return -1;

            try
            {
                Capture cap = indexcaptures[index];
                return cap.Index;
            } catch (ArgumentOutOfRangeException ex)
            {
                throw new IndexOutOfRangeException(String.Format(&quot;The index {0} was out of range&quot;, index), ex);
            }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_6">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_6">&#182;</a>
							</div>
							<p>Gets the position of the character immediately following the end of the specified numbered capture</p>

						</td>
                        <td class="lines">
100<br />
101<br />
102<br />
103<br />
104<br />
105<br />
106<br />
107<br />
108<br />
109<br />
110<br />
111<br />
112<br />
113<br />
114<br />
115<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public int End(int index)
        {
            if (index &gt;= indexcaptures.Count)
                return -1;

            try
            {
                Capture cap = indexcaptures[index];
                return cap.Index + cap.Length;
            } catch (ArgumentOutOfRangeException ex)
            {
                throw new IndexOutOfRangeException(String.Format(&quot;The index {0} was out of range&quot;, index), ex);
            }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_7">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_7">&#182;</a>
							</div>
							<p>Gets the position of the named capture</p>

						</td>
                        <td class="lines">
120<br />
121<br />
122<br />
123<br />
124<br />
125<br />
126<br />
127<br />
128<br />
129<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public int Begin(string name)
        {
            Capture cap;
            if(namedcaptures == null || !namedcaptures.TryGetValue(name, out cap))
                return -1;
            
            return cap.Index;
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_8">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_8">&#182;</a>
							</div>
							<p>Gets the position of the character immediately following the end of the specified named capture</p>

						</td>
                        <td class="lines">
134<br />
135<br />
136<br />
137<br />
138<br />
139<br />
140<br />
141<br />
142<br />
143<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public int End(string name)
        {
            Capture cap;
            if (namedcaptures == null || !namedcaptures.TryGetValue(name, out cap))
                return -1;

            return cap.Index + cap.Length;
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_9">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_9">&#182;</a>
							</div>
							<p>Gets the total number of captures</p>

						</td>
                        <td class="lines">
146<br />
147<br />
148<br />
149<br />
150<br />
151<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public int Count
        {
            get { return indexcaptures.Count + (namedcaptures == null ? 0 : namedcaptures.Count); }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_10">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_10">&#182;</a>
							</div>
							<p>Gets the total number of numbered captures</p>

						</td>
                        <td class="lines">
154<br />
155<br />
156<br />
157<br />
158<br />
159<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public int MatchCount
        {
            get { return indexcaptures.Count; }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_11">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_11">&#182;</a>
							</div>
							<p>Retrieves an array of capture names from the matches.</p>

						</td>
                        <td class="lines">
164<br />
165<br />
166<br />
167<br />
168<br />
169<br />
170<br />
171<br />
172<br />
173<br />
174<br />
175<br />
176<br />
177<br />
178<br />
179<br />
180<br />
181<br />
182<br />
183<br />
184<br />
185<br />
186<br />
187<br />
188<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public string[] GetNames()
        {
            if(namedcaptures == null)
                return new string[0];

            return this.namedcaptures.Keys.ToArray();
        }

        void AddMatch(Regex regex, Match match)
        {
            if (!match.Success)
                return;

            for (int index = 0; index &lt; match.Groups.Count; index++)
            {
                Group group = match.Groups[index];
                if (group.Captures.Count == 0)
                {
                    continue;
                }

                string name = regex.GroupNameFromNumber(index);
                int tryint;

</code></pre>
						</td>
					</tr>
					<tr id="section_12">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_12">&#182;</a>
							</div>
							<p>We only record the LAST capture in this group. This simplifies matching so
that multiple captures in the same group are overwritten.</p>

						</td>
                        <td class="lines">
190<br />
191<br />
192<br />
193<br />
194<br />
195<br />
196<br />
197<br />
198<br />
199<br />
200<br />
201<br />
202<br />
203<br />
204<br />
205<br />
206<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>                if (Int32.TryParse(name, out tryint))
                {
                    this.indexcaptures.Add(group.Captures[group.Captures.Count - 1]);
                }
                else
                {
                    if (namedcaptures == null)
                        namedcaptures = new Dictionary&lt;string, Capture&gt;();

                    this.namedcaptures[name] = group.Captures[group.Captures.Count - 1];
                }
            }
        }

        IEnumerable&lt;Capture&gt; GetCaptures()
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_13">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_13">&#182;</a>
							</div>
							<p>First return numbered capture values&hellip;</p>

						</td>
                        <td class="lines">
207<br />
208<br />
209<br />
210<br />
211<br />
212<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>            foreach (Capture capture in indexcaptures)
            {
                yield return capture;
            }

</code></pre>
						</td>
					</tr>
					<tr id="section_14">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_14">&#182;</a>
							</div>
							<p>&hellip;then return named captures</p>

						</td>
                        <td class="lines">
213<br />
214<br />
215<br />
216<br />
217<br />
218<br />
219<br />
220<br />
221<br />
222<br />
223<br />
224<br />
225<br />
226<br />
227<br />
228<br />
229<br />
230<br />
231<br />
232<br />
233<br />
234<br />
235<br />
236<br />
237<br />
238<br />
239<br />
240<br />
241<br />
242<br />
243<br />
244<br />
245<br />
246<br />
247<br />
248<br />
249<br />
250<br />
251<br />
252<br />
253<br />
254<br />
255<br />
256<br />
257<br />
258<br />
259<br />
260<br />
261<br />
262<br />
263<br />
264<br />
265<br />
266<br />
267<br />
268<br />
269<br />
270<br />
271<br />
272<br />
273<br />
274<br />
275<br />
276<br />
277<br />
278<br />
279<br />
280<br />
281<br />
282<br />
283<br />
284<br />
285<br />
286<br />
287<br />
288<br />
289<br />
290<br />
291<br />
292<br />
293<br />
294<br />
295<br />
296<br />
297<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>            if (namedcaptures != null)
            {
                foreach (KeyValuePair&lt;string, Capture&gt; capture in namedcaptures)
                {
                    yield return capture.Value;
                }
            }
        }

        IEnumerator&lt;string&gt; GetEnumeratorInternal()
        {
            foreach (Capture cap in GetCaptures())
            {
                yield return cap.Value;
            }
        }

        public IEnumerator&lt;string&gt; GetEnumerator()
        {
            return GetEnumeratorInternal();
        }

        IEnumerator IEnumerable.GetEnumerator()
        {
            return GetEnumeratorInternal();
        }

        public MatchData(Regex regex, MatchCollection matches)
        {
            if (matches == null || matches.Count == 0)
                return;

            foreach (Match match in matches)
            {
                AddMatch(regex, match);
            }
        }

        public MatchData(Regex regex, Match match)
        {
            AddMatch(regex, match);
        }
    }

    public static class StringRegexExtensions
    {
        static readonly Dictionary&lt;char, RegexOptions&gt; _optionChars = new Dictionary&lt;char, RegexOptions&gt; {
            { &#39;i&#39;, RegexOptions.IgnoreCase },
            { &#39;s&#39;, RegexOptions.Singleline },
            { &#39;m&#39;, RegexOptions.Multiline },
            { &#39;x&#39;, RegexOptions.IgnorePatternWhitespace },
            { &#39;c&#39;, RegexOptions.Compiled },
            { &#39;r&#39;, RegexOptions.RightToLeft }
        };

#if !NET35
        static readonly ConcurrentDictionary&lt;Tuple&lt;string, RegexOptions&gt;, Regex&gt; _cache = new ConcurrentDictionary&lt;Tuple&lt;string, RegexOptions&gt;, Regex&gt;();

        static Tuple&lt;string, RegexOptions&gt; MakeCacheKey(string pattern, RegexOptions opt)
        {
            return new Tuple&lt;string, RegexOptions&gt;(pattern, opt);
        }

        static Tuple&lt;string, RegexOptions&gt; MakeCacheKey(string pattern)
        {
            return new Tuple&lt;string, RegexOptions&gt;(pattern, RegexOptions.None);
        }

        static Regex ToRegex(this string pattern)
        {
            return _cache.GetOrAdd(MakeCacheKey(pattern), p =&gt;
            {
                return new Regex(pattern);
            });
        }

        static Regex ToRegex(this string pattern, RegexOptions options)
        {
            return _cache.GetOrAdd(MakeCacheKey(pattern, options), p =&gt;
            {
                return new Regex(pattern, options);
            });
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_15">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_15">&#182;</a>
							</div>
							<p>The number of Regex objects that occupy the cache.</p>

						</td>
                        <td class="lines">
300<br />
301<br />
302<br />
303<br />
304<br />
305<br />
306<br />
307<br />
308<br />
309<br />
310<br />
311<br />
312<br />
313<br />
314<br />
315<br />
316<br />
317<br />
318<br />
319<br />
320<br />
321<br />
322<br />
323<br />
324<br />
325<br />
326<br />
327<br />
328<br />
329<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static int CacheCount
        {
            get
            {
                return _cache.Count;
            }
        }
#else
        static Regex ToRegex(this string pattern)
        {
            return new Regex(pattern);
        }

        static Regex ToRegex(this string pattern, RegexOptions options)
        {
            return new Regex(pattern, options);
        }
#endif

        static RegexOptions GetOptions(string options)
        {
            if (String.IsNullOrEmpty(options))
                return RegexOptions.None;

            return (RegexOptions)options.Select(c =&gt; {
                try { return (int)_optionChars[c]; } catch (KeyNotFoundException) { return 0; }
            }).Sum();
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_16">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_16">&#182;</a>
							</div>
							<p>Tests whether this string matches a string regex pattern</p>

						</td>
                        <td class="lines">
334<br />
335<br />
336<br />
337<br />
338<br />
339<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static bool HasPattern(this string input, string pattern)
        {
            return HasPattern(input, pattern, null);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_17">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_17">&#182;</a>
							</div>
							<p>Tests whether this string matches a string regex pattern with optional regex options.</p>

						</td>
                        <td class="lines">
344<br />
345<br />
346<br />
347<br />
348<br />
349<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static bool HasPattern(this string input, string pattern, string options)
        {
            return pattern.ToRegex(GetOptions(options)).IsMatch(input);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_18">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_18">&#182;</a>
							</div>
							<p>Tests whether this string matches a string regex pattern</p>

						</td>
                        <td class="lines">
353<br />
354<br />
355<br />
356<br />
357<br />
358<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static bool HasPattern(this string input, string pattern, int startat)
        {
            return HasPattern(input, pattern, null, startat);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_19">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_19">&#182;</a>
							</div>
							<p>Tests whether this string matches a string regex pattern</p>

						</td>
                        <td class="lines">
363<br />
364<br />
365<br />
366<br />
367<br />
368<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static bool HasPattern(this string input, string pattern, string options, int startat)
        {
            return pattern.ToRegex(GetOptions(options)).IsMatch(input, startat);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_20">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_20">&#182;</a>
							</div>
							<p>Returns matches within the string that match a specified regex pattern</p>

						</td>
                        <td class="lines">
373<br />
374<br />
375<br />
376<br />
377<br />
378<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static MatchData MatchesPattern(this string input, string pattern)
        {
            return MatchesPattern(input, pattern, null);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_21">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_21">&#182;</a>
							</div>
							<p>Returns matches within the string that match a specified regex pattern with the specified regex options</p>

						</td>
                        <td class="lines">
384<br />
385<br />
386<br />
387<br />
388<br />
389<br />
390<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static MatchData MatchesPattern(this string input, string pattern, string options)
        {
            var re = pattern.ToRegex(GetOptions(options));
            return new MatchData(re, re.Matches(input));
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_22">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_22">&#182;</a>
							</div>
							<p>Returns matches within the string that match a specified regex pattern beginning at the specified offset</p>

						</td>
                        <td class="lines">
396<br />
397<br />
398<br />
399<br />
400<br />
401<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static MatchData MatchesPattern(this string input, string pattern, int startat)
        {
            return MatchesPattern(input, pattern, null, startat);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_23">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_23">&#182;</a>
							</div>
							<p>Returns matches within the string that match a specified regex pattern beginning at the specified offset with the specified regex options</p>

						</td>
                        <td class="lines">
408<br />
409<br />
410<br />
411<br />
412<br />
413<br />
414<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static MatchData MatchesPattern(this string input, string pattern, string options, int startat)
        {
            var re = pattern.ToRegex(GetOptions(options));
            return new MatchData(re, re.Matches(input, startat));
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_24">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_24">&#182;</a>
							</div>
							<p>Returns a copy of this string with the first occurrence of the specified regex pattern replaced with the specified replacement text</p>

						</td>
                        <td class="lines">
420<br />
421<br />
422<br />
423<br />
424<br />
425<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static string Sub(this string input, string pattern, string replacement)
        {
            return Sub(input, pattern, null, replacement);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_25">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_25">&#182;</a>
							</div>
							<p>Returns a copy of this string with the first occurrence of the specified regex pattern replaced with the specified replacement text and options</p>

						</td>
                        <td class="lines">
432<br />
433<br />
434<br />
435<br />
436<br />
437<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static string Sub(this string input, string pattern, string options, string replacement)
        {
            return pattern.ToRegex(GetOptions(options)).Replace(input, replacement, 1);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_26">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_26">&#182;</a>
							</div>
							<p>Returns a copy of this string with the first occurrence of the specified regex pattern replaced with the specified replacement text</p>

						</td>
                        <td class="lines">
443<br />
444<br />
445<br />
446<br />
447<br />
448<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static string Sub(this string input, string pattern, Func&lt;Match, string&gt; evaluator)
        {
            return Sub(input, pattern, null, evaluator);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_27">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_27">&#182;</a>
							</div>
							<p>Returns a copy of this string with the first occurrence of the specified regex pattern replaced with the specified replacement text and options</p>

						</td>
                        <td class="lines">
455<br />
456<br />
457<br />
458<br />
459<br />
460<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static string Sub(this string input, string pattern, string options, Func&lt;Match, string&gt; evaluator)
        {
            return pattern.ToRegex(GetOptions(options)).Replace(input, delegate(Match arg) { return evaluator(arg); }, 1);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_28">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_28">&#182;</a>
							</div>
							<p>Returns a copy of this string with all occurrences of the specified regex pattern replaced with the specified replacement text</p>

						</td>
                        <td class="lines">
466<br />
467<br />
468<br />
469<br />
470<br />
471<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static string GSub(this string input, string pattern, string replacement)
        {
            return GSub(input, pattern, null, replacement);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_29">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_29">&#182;</a>
							</div>
							<p>Returns a copy of this string with all occurrences of the specified regex pattern and options replaced with the specified replacement text</p>

						</td>
                        <td class="lines">
478<br />
479<br />
480<br />
481<br />
482<br />
483<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static string GSub(this string input, string pattern, string options, string replacement)
        {
            return pattern.ToRegex(GetOptions(options)).Replace(input, replacement);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_30">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_30">&#182;</a>
							</div>
							<p>Returns a copy of this string with all occurrences of the specified regex pattern replaced with the text returned from the given function</p>

						</td>
                        <td class="lines">
489<br />
490<br />
491<br />
492<br />
493<br />
494<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static string GSub(this string input, string pattern, Func&lt;Match, string&gt; evaluator)
        {
            return GSub(input, pattern, null, evaluator);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_31">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_31">&#182;</a>
							</div>
							<p>Returns a copy of this string with all occurrences of the specified regex pattern and options replaced with the text returned from the given function</p>

						</td>
                        <td class="lines">
501<br />
502<br />
503<br />
504<br />
505<br />
506<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static string GSub(this string input, string pattern, string options, Func&lt;Match, string&gt; evaluator)
        {
            return pattern.ToRegex(GetOptions(options)).Replace(input, delegate(Match arg) { return evaluator(arg); });
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_32">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_32">&#182;</a>
							</div>
							<p>Returns the first index of the specified regex pattern</p>

						</td>
                        <td class="lines">
511<br />
512<br />
513<br />
514<br />
515<br />
516<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static int IndexOfPattern(this string input, string pattern)
        {
            return IndexOfPattern(input, pattern, null);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_33">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_33">&#182;</a>
							</div>
							<p>Returns the first index of the specified regex pattern and options</p>

						</td>
                        <td class="lines">
522<br />
523<br />
524<br />
525<br />
526<br />
527<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static int IndexOfPattern(this string input, string pattern, string options)
        {
            return input.MatchPattern(pattern, options).Begin(0);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_34">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_34">&#182;</a>
							</div>
							<p>Returns the first index of the specified regex pattern after the specified position</p>

						</td>
                        <td class="lines">
533<br />
534<br />
535<br />
536<br />
537<br />
538<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static int IndexOfPattern(this string input, string pattern, int startat)
        {
            return IndexOfPattern(input, pattern, null, startat);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_35">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_35">&#182;</a>
							</div>
							<p>Returns the first index of the specified regex pattern and options after the specified position</p>

						</td>
                        <td class="lines">
545<br />
546<br />
547<br />
548<br />
549<br />
550<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static int IndexOfPattern(this string input, string pattern, string options, int startat)
        {
            return input.MatchPattern(pattern, options, startat).Begin(0);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_36">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_36">&#182;</a>
							</div>
							<p>Returns the last index of the specified regex pattern</p>

						</td>
                        <td class="lines">
555<br />
556<br />
557<br />
558<br />
559<br />
560<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static int LastIndexOfPattern(this string input, string pattern)
        {
            return LastIndexOfPattern(input, pattern, null);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_37">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_37">&#182;</a>
							</div>
							<p>Returns the last index of the specified regex pattern</p>

						</td>
                        <td class="lines">
566<br />
567<br />
568<br />
569<br />
570<br />
571<br />
572<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static int LastIndexOfPattern(this string input, string pattern, string options)
        {
            var m = input.MatchesPattern(pattern, options);
            return m.Begin(m.MatchCount - 1);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_38">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_38">&#182;</a>
							</div>
							<p>Return the value of the first match of the specified regex pattern</p>

						</td>
                        <td class="lines">
577<br />
578<br />
579<br />
580<br />
581<br />
582<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static string FindPattern(this string input, string pattern)
        {
            return input.MatchPattern(pattern).First();
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_39">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_39">&#182;</a>
							</div>
							<p>Return the value of the first match of the specified regex pattern</p>

						</td>
                        <td class="lines">
588<br />
589<br />
590<br />
591<br />
592<br />
593<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static string FindPattern(this string input, string pattern, string options)
        {
            return input.MatchPattern(pattern, options).First();
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_40">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_40">&#182;</a>
							</div>
							<p>Return the value of the specified numbered capture of the first match of the specified regex pattern</p>

						</td>
                        <td class="lines">
599<br />
600<br />
601<br />
602<br />
603<br />
604<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static string FindPattern(this string input, string pattern, int capture)
        {
            return FindPattern(input, pattern, null, capture);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_41">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_41">&#182;</a>
							</div>
							<p>Return the value of the specified numbered capture of the first match of the specified regex pattern</p>

						</td>
                        <td class="lines">
611<br />
612<br />
613<br />
614<br />
615<br />
616<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static string FindPattern(this string input, string pattern, string options, int capture)
        {
            try { return input.MatchPattern(pattern, options)[capture]; } catch (IndexOutOfRangeException) { return null; }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_42">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_42">&#182;</a>
							</div>
							<p>Partition this string into the head, match value, and tail according to the specified regex value</p>

						</td>
                        <td class="lines">
621<br />
622<br />
623<br />
624<br />
625<br />
626<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static string[] Partition(this string input, string pattern)
        {
            return Partition(input, pattern, null);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_43">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_43">&#182;</a>
							</div>
							<p>Partition this string into the head, match value, and tail according to the specified regex value</p>

						</td>
                        <td class="lines">
632<br />
633<br />
634<br />
635<br />
636<br />
637<br />
638<br />
639<br />
640<br />
641<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static string[] Partition(this string input, string pattern, string options)
        {
            var m = input.MatchPattern(pattern, options);
            if (m.Count == 0)
                return new string[] { String.Empty, String.Empty, input };

            return new string[] { input.Substring(0, m.Begin(0)), m.First(), input.Substring(m.End(0)) };
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_44">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_44">&#182;</a>
							</div>
							<p>Scans this string for the specified pattern, and calls the specified function for each match.</p>

						</td>
                        <td class="lines">
647<br />
648<br />
649<br />
650<br />
651<br />
652<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static void Scan(this string input, string pattern, Action&lt;string&gt; each)
        {
            input.Scan(pattern, null, each);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_45">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_45">&#182;</a>
							</div>
							<p>Scans this string for the specified pattern which can contains two capturing groups or a group with one or more subgroups. Each time the pattern is encountered, the specified function is invoked with the first two captures.</p>

						</td>
                        <td class="lines">
657<br />
658<br />
659<br />
660<br />
661<br />
662<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static void Scan(this string input, string pattern, Action&lt;string, string&gt; each)
        {
            input.Scan(pattern, null, each);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_46">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_46">&#182;</a>
							</div>
							<p>Scans this string for the specified pattern which can contain three capturing groups or a group with one or more subgroups. Each time the pattern is encountered, the specified function is invoked with the first three captures specified.</p>

						</td>
                        <td class="lines">
667<br />
668<br />
669<br />
670<br />
671<br />
672<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static void Scan(this string input, string pattern, Action&lt;string, string, string&gt; each)
        {
            input.Scan(pattern, null, each);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_47">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_47">&#182;</a>
							</div>
							<p>Scans this string for the specified pattern which can contain four capturing groups or a group with one or more subgroups. Each time the pattern is encountered, the specified function is invoked with the first four captures specified.</p>

						</td>
                        <td class="lines">
677<br />
678<br />
679<br />
680<br />
681<br />
682<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static void Scan(this string input, string pattern, Action&lt;string, string, string, string&gt; each)
        {
            input.Scan(pattern, null, each);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_48">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_48">&#182;</a>
							</div>
							<p>Scans this string for the specified pattern and options, and calls the specified function for each match.</p>

						</td>
                        <td class="lines">
689<br />
690<br />
691<br />
692<br />
693<br />
694<br />
695<br />
696<br />
697<br />
698<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static void Scan(this string input, string pattern, string options, Action&lt;string&gt; each)
        {
            var matches = pattern.ToRegex(GetOptions(options)).Matches(input);
            foreach (Match match in matches)
            {
                each(match.Groups.Count &gt; 1 ? match.Groups[1].Value : match.Value);
            }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_49">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_49">&#182;</a>
							</div>
							<p>Scans this string for the specified pattern and options which can contains two capturing groups or a group with one or more subgroups. Each time the pattern is encountered, the specified function is invoked with the first two captures.</p>

						</td>
                        <td class="lines">
704<br />
705<br />
706<br />
707<br />
708<br />
709<br />
710<br />
711<br />
712<br />
713<br />
714<br />
715<br />
716<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static void Scan(this string input, string pattern, string options, Action&lt;string, string&gt; each)
        {
            var matches = pattern.ToRegex(GetOptions(options)).Matches(input);
            foreach (Match match in matches)
            {
                if (match.Groups.Count &gt; 2)
                    each(match.Groups[1].Value, match.Groups[2].Value);
                else
                    each(match.Value, null);
            }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_50">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_50">&#182;</a>
							</div>
							<p>Scans this string for the specified pattern and options which can contain three capturing groups or a group with one or more subgroups. Each time the pattern is encountered, the specified function is invoked with the first three captures specified.</p>

						</td>
                        <td class="lines">
722<br />
723<br />
724<br />
725<br />
726<br />
727<br />
728<br />
729<br />
730<br />
731<br />
732<br />
733<br />
734<br />
735<br />
736<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static void Scan(this string input, string pattern, string options, Action&lt;string, string, string&gt; each)
        {
            var matches = pattern.ToRegex(GetOptions(options)).Matches(input);
            foreach (Match match in matches)
            {
                if (match.Groups.Count &gt; 3)
                    each(match.Groups[1].Value, match.Groups[2].Value, match.Groups[3].Value);
                else if (match.Groups.Count &gt; 2)
                    each(match.Groups[1].Value, match.Groups[2].Value, null);
                else
                    each(match.Value, null, null);
            }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_51">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_51">&#182;</a>
							</div>
							<p>Scans this string for the specified pattern and options which can contain four capturing groups or a group with one or more subgroups. Each time the pattern is encountered, the specified function is invoked with the first four captures specified.</p>

						</td>
                        <td class="lines">
742<br />
743<br />
744<br />
745<br />
746<br />
747<br />
748<br />
749<br />
750<br />
751<br />
752<br />
753<br />
754<br />
755<br />
756<br />
757<br />
758<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        public static void Scan(this string input, string pattern, string options, Action&lt;string, string, string, string&gt; each)
        {
            var matches = pattern.ToRegex(GetOptions(options)).Matches(input);
            foreach (Match match in matches)
            {
                if(match.Groups.Count &gt; 4)
                    each(match.Groups[1].Value, match.Groups[2].Value, match.Groups[3].Value, match.Groups[4].Value);
                else if (match.Groups.Count &gt; 3)
                    each(match.Groups[1].Value, match.Groups[2].Value, match.Groups[3].Value, null);
                else if (match.Groups.Count &gt; 2)
                    each(match.Groups[1].Value, match.Groups[2].Value, null, null);
                else
                    each(match.Value, null, null, null);
            }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_52">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_52">&#182;</a>
							</div>
							<p>Single match, used internally</p>

						</td>
                        <td class="lines">
759<br />
760<br />
761<br />
762<br />
763<br />
764<br />
765<br />
766<br />
767<br />
768<br />
769<br />
770<br />
771<br />
772<br />
773<br />
774<br />
775<br />
776<br />
777<br />
778<br />
779<br />
780<br />
781<br />
782<br />
                        </td>
						<td class="code">
							<pre><code class='prettyprint'>        static MatchData MatchPattern(this string input, string pattern)
        {
            return MatchPattern(input, pattern, null);
        }

        static MatchData MatchPattern(this string input, string pattern, string options)
        {
            var re = pattern.ToRegex(GetOptions(options));
            return new MatchData(re, re.Match(input));
        }

        static MatchData MatchPattern(this string input, string pattern, int startat)
        {
            return MatchPattern(input, pattern, null, startat);
        }

        static MatchData MatchPattern(this string input, string pattern, string options, int startat)
        {
            var re = pattern.ToRegex(GetOptions(options));
            return new MatchData(re, re.Match(input, startat));
        }
    }
}

</code></pre>
						</td>
					</tr>
			</tbody>
		</table>
	</div>
</body>
</html>